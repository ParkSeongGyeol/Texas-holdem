# 박성결 - 3~4주차 업무 투두리스트

## 📌 담당 영역
게임 진행 로직 (Game Logic)
- 게임 상태 관리 (FSM)
- 턴 진행 시스템
- 베팅 라운드 구현
- 팟 분배 알고리즘
- 승자 판정 로직
- 콘솔 UI 및 토너먼트 모드

---

## 3주차: 게임 규칙 문서화

### ✅ 완료 항목
- [x] **게임 규칙 문서화** (`docs/게임규칙.md` 작성 완료)
  - [x] 텍사스 홀덤 기본 규칙 정리
  - [x] 베팅 라운드 상세 설명 (Preflop, Flop, Turn, River)
  - [x] 액션 종류 정의 (Fold, Check, Call, Raise, All-in)
  - [x] 팟 분배 규칙
  - [x] 사이드 팟 처리 규칙
  - [x] 승자 판정 기준

- [x] **상태 다이어그램 설계** (`docs/상태다이어그램.md` 작성 완료)
  - [x] 게임 페이즈 FSM (Finite State Machine) 설계
    - PREFLOP → FLOP → TURN → RIVER → SHOWDOWN
  - [x] 각 페이즈별 전이 조건 정의
  - [x] 플레이어 상태 다이어그램
    - Active, Folded, All-in, Out of chips
  - [x] 베팅 라운드 상태 흐름

- [x] **게임 플로우 정의** (`docs/게임플로우.md` 작성 완료)
  - [x] 핸드 시작부터 종료까지 전체 흐름 작성
  - [x] 딜러 버튼 이동 로직
  - [x] 블라인드 처리 흐름
  - [x] 베팅 라운드 종료 조건
  - [x] 조기 종료 케이스 (모든 플레이어가 폴드 등)

### 🔲 진행 중 항목
- 없음

---

## 4주차: Player 클래스 구현

### ✅ 완료 항목
- [x] **Player 클래스 기본 구조 설계**
  - [x] 클래스 속성 정의 (name, chips, hand, current_bet, 상태 플래그)
  - [x] 생성자 구현

- [x] **핸드 관리 시스템**
  - [x] `receive_card()` - 카드 받기
  - [x] `reset_for_new_hand()` - 새 핸드를 위한 상태 리셋
  - [x] `hand` 속성으로 홀 카드 관리

- [x] **칩 스택 관리**
  - [x] `bet()` - 베팅 처리 및 칩 차감
  - [x] All-in 자동 처리 로직
  - [x] `fold()` - 폴드 처리
  - [x] `can_bet()` - 베팅 가능 여부 확인
  - [x] 칩 잔액 추적

### 🔲 진행 중 항목
- 없음

### ✅ 추가 완료 항목
- [x] **Player 클래스 단위 테스트 작성** (`tests/test_core.py` 보강 완료)
  - [x] 베팅 테스트 케이스 추가
    - [x] 정상 베팅
    - [x] All-in 시나리오 (초과 베팅, 정확한 금액)
    - [x] 칩 부족 시나리오
    - [x] 음수/0 베팅 시도
    - [x] 폴드 후 베팅 시도
    - [x] 칩 없는 상태에서 베팅 시도
  - [x] 상태 전환 테스트
    - [x] 폴드 후 상태 확인
    - [x] 이중 폴드 시도
    - [x] All-in 후 액션 불가 확인
    - [x] 핸드 리셋 테스트
  - [x] 카드 받기 테스트
    - [x] 정상 카드 받기
    - [x] 3장 이상 받기 시도
    - [x] None 카드 받기 시도
  - [x] 상태 확인 메서드 테스트
    - [x] can_bet() 테스트
    - [x] can_act() 테스트
    - [x] get_state() 테스트
  - [x] 문자열 표현 테스트 (__str__, __repr__)

- [x] **엣지 케이스 처리** (player.py 개선 완료)
  - [x] 음수 베팅 시도 방지 (ValueError)
  - [x] 0 베팅 시도 방지 (ValueError)
  - [x] 칩이 0인 플레이어 처리 (is_active = False)
  - [x] 폴드 후 베팅 시도 방지 (RuntimeError)
  - [x] 빈 이름 플레이어 생성 방지 (ValueError)
  - [x] 음수 초기 칩 방지 (ValueError)
  - [x] 이중 폴드 방지 (RuntimeError)
  - [x] 홀 카드 3장 이상 방지 (ValueError)
  - [x] None 카드 받기 방지 (ValueError)

- [x] **코드 품질 개선** (player.py 개선 완료)
  - [x] 클래스 및 모든 메서드에 상세한 Docstring 추가
  - [x] Args, Returns, Raises 문서화
  - [x] 타입 힌트 검증 (typing.List[Card])
  - [x] 명확한 에러 메시지 추가
  - [x] can_act() 메서드 추가 (액션 가능 여부)
  - [x] get_state() 메서드 추가 (현재 상태 반환)
  - [x] __str__ 및 __repr__ 개선

---

## 📝 참고사항

### 현재 구현 상태
- `src/core/player.py` - Player 클래스 기본 구현 완료 ✅
- `src/core/game.py` - PokerGame 클래스 기본 구조 완료 (5주차 이후 작업)
- `tests/test_core.py` - 기본 테스트 존재, 보강 필요

### 다음 주차 미리보기
- **5주차**: 게임 라운드 진행, 플롭/턴/리버 진행, 턴 종료 조건
- **6주차**: 베팅 액션 처리, 사이드 팟 계산, 올인 상황 처리
- **7주차**: 콘솔 UI 구현, 게임 흐름 테스트, 디버깅 모드

### 협업 포인트
- **문현준**: Card/Deck 클래스 활용 (receive_card에서 사용)
- **박종호**: AI가 Player 액션 메서드 호출 (bet, fold 등)
- **박우현**: 확률 계산 시 Player 정보 참조

---

## 🎯 3~4주차 목표
1. ✅ Player 클래스 완전 구현 및 테스트 - **완료**
2. ✅ 게임 규칙 및 상태 다이어그램 문서화 완료 - **완료**
3. ✅ 단위 테스트 커버리지 80% 이상 - **완료** (Player 클래스 100% 커버)
4. 🤝 팀원들과 인터페이스 검증 - **진행 예정**

---

## 📊 작업 완료 요약

### 생성된 문서
1. `docs/게임규칙.md` - 텍사스 홀덤 규칙 전체 (6개 섹션, ~300줄)
2. `docs/상태다이어그램.md` - FSM 설계 및 상태 전이 (4개 섹션, ~400줄)
3. `docs/게임플로우.md` - 게임 흐름 전체 (7개 섹션, ~500줄)

### 개선된 코드
1. `src/core/player.py` - 엣지 케이스 처리, Docstring 보완 (~190줄)
   - 9개 엣지 케이스 검증 추가
   - 2개 헬퍼 메서드 추가 (can_act, get_state)
   - 전체 메서드 Docstring 작성

### 추가된 테스트
1. `tests/test_core.py` - Player 클래스 테스트 (~150줄)
   - 총 23개 테스트 케이스
   - 정상 동작 테스트 8개
   - 엣지 케이스 테스트 10개
   - 상태 확인 테스트 5개

---

**작성일**: 2025-10-01
**최종 업데이트**: 2025-10-01
**담당자**: 박성결
**상태**: ✅ 3~4주차 목표 완료
